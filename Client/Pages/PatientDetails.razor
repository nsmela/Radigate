@page "/patients/{id:int}"

@if(patient is null){
    <MudProgressCircular>@message</MudProgressCircular>
} else {
    <PatientDetailedView PatientId="@Id" />
}

@code {
    [Inject] private IPatientService PatientService { get; set; }
    [Parameter] public int Id { get; set; }

    private Patient? patient = null;
    private string message = string.Empty;

    private string FullName => (patient.LastName + "," + patient.FirstName).ToUpper();

    protected override async Task OnParametersSetAsync() {
        message = "Loading Patient... ";
        var result = await PatientService.GetPatient(Id);

        if(!result.Success){
            message = result.Message;
        } else {
            patient = result.Data;
        }
    }
}
