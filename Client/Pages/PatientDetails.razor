@page "/patients/{id:int}"

@if(Patient is null){
    <MudProgressCircular>@message</MudProgressCircular>
} else {
    <PatientDetailedView PatientId="@Id" />
}

@code {
    [Inject] private IPatientService PatientService { get; set; }
    [Parameter] public int Id { get; set; }

    private PatientDisplay? Patient { get; set; }
    private string message = string.Empty;

    protected override async Task OnParametersSetAsync() {
        message = "Loading Patient... ";
        var result = await PatientService.GetPatient(Id);

        if(!result.Success){
            message = result.Message;
        } else {
            Patient = result.Data;
        }
    }

}
